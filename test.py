
import numpy as np
import matplotlib.pyplot as plt
from scipy.interpolate import make_interp_spline
from scipy.interpolate import BSpline

# 주어진 좌표값
points  = [[253.84616088867188, 430.7692565917969], [252.30770874023438, 432.3077087402344], [252.30770874023438, 495.3846435546875], [256.923095703125, 500.0000305175781], [256.923095703125, 501.5384826660156], [258.4615478515625, 503.0769348144531], [258.4615478515625, 556.923095703125], [260.0, 558.4615478515625], [264.6153869628906, 558.4615478515625], [266.15386962890625, 560.0], [396.923095703125, 560.0], [396.923095703125, 558.4615478515625], [398.4615478515625, 556.923095703125], [398.4615478515625, 509.23077392578125], [400.0, 507.69232177734375], [400.0, 501.5384826660156], [403.0769348144531, 498.4615478515625], [404.6153869628906, 500.0000305175781], [404.6153869628906, 504.61541748046875], [406.15386962890625, 506.15386962890625], [406.15386962890625, 510.7692565917969], [407.69232177734375, 512.3077392578125], [407.69232177734375, 516.923095703125], [409.23077392578125, 516.923095703125], [409.23077392578125, 512.3077392578125], [410.7692565917969, 510.7692565917969], [410.7692565917969, 507.69232177734375], [413.8461608886719, 504.61541748046875], [415.3846435546875, 504.61541748046875], [416.923095703125, 503.0769348144531], [423.0769348144531, 503.0769348144531], [424.6153869628906, 501.5384826660156], [430.7692565917969, 501.5384826660156], [435.3846435546875, 496.923095703125], [435.3846435546875, 495.3846435546875], [440.0000305175781, 490.7692565917969], [440.0000305175781, 487.69232177734375], [441.5384826660156, 486.15386962890625], [441.5384826660156, 
455.3846435546875], [440.0000305175781, 453.8461608886719], [440.0000305175781, 447.69232177734375], [438.4615478515625, 446.15386962890625], [438.4615478515625, 436.923095703125], [438.4615478515625, 446.15386962890625], [432.3077087402344, 452.3077087402344], [430.7692565917969, 452.3077087402344], [429.23077392578125, 453.8461608886719], [429.23077392578125, 455.3846435546875], [427.69232177734375, 456.923095703125], [427.69232177734375, 458.4615478515625], [426.15386962890625, 460.0000305175781], [423.0769348144531, 460.0000305175781], [421.5384826660156, 461.5384826660156], [413.8461608886719, 461.5384826660156], [412.3077087402344, 463.0769348144531], [410.7692565917969, 463.0769348144531], [409.23077392578125, 464.6153869628906], [404.6153869628906, 464.6153869628906], [403.0769348144531, 466.15386962890625], [396.923095703125, 466.15386962890625], [395.3846435546875, 467.69232177734375], [360.0, 467.69232177734375], [358.4615478515625, 466.15386962890625], [355.3846435546875, 466.15386962890625], [353.8461608886719, 464.6153869628906], [352.3077087402344, 464.6153869628906], [350.7692565917969, 463.0769348144531], [346.15386962890625, 463.0769348144531], [344.6153869628906, 461.5384826660156], [336.923095703125, 461.5384826660156], [335.3846130371094, 460.0000305175781], [332.3077087402344, 460.0000305175781], [329.23077392578125, 456.923095703125], [326.15386962890625, 456.923095703125], [324.6153869628906, 455.3846435546875], [321.5384826660156, 455.3846435546875], [316.923095703125, 450.7692565917969], [313.8461608886719, 450.7692565917969], [312.3077087402344, 449.23077392578125], [309.23077392578125, 449.23077392578125], [307.69232177734375, 447.69232177734375], [306.15386962890625, 447.69232177734375], [303.0769348144531, 444.6153869628906], [301.5384826660156, 444.6153869628906], [300.0, 443.0769348144531], [296.923095703125, 443.0769348144531], [286.15386962890625, 432.3077087402344], [283.0769348144531, 432.3077087402344], [281.5384826660156, 430.7692565917969]]
# # 좌표를 NumPy 배열로 변환
# points = np.array(points)

# # 이동평균을 계산할 윈도우 크기
# window_size = 2

# # 이동평균을 계산
# smoothed_points = np.convolve(points[:, 0], np.ones(window_size)/window_size, mode='valid'), \
#                   np.convolve(points[:, 1], np.ones(window_size)/window_size, mode='valid')

# # 시각화
# plt.figure(figsize=(8, 8))
# plt.plot(smoothed_points[0], smoothed_points[1], color='blue', label='Smoothed Curve')
# plt.scatter(points[:, 0], points[:, 1], color='red', label='Original Points')
# plt.xlabel('X')
# plt.ylabel('Y')
# plt.title('Smoothing with Moving Average')
# plt.legend()
# plt.show()


points = np.array(points)

# NumPy 배열을 전치하여 x 및 y 좌표를 추출
x, y = points.T

# B-spline 생성
degree = 3  # B-spline의 차수 (3 차원 이상의 경우 각 차원마다 차수를 지정)
t = range(len(points))
spl_x = BSpline(t, x, degree)
spl_y = BSpline(t, y, degree)

# 새로운 t 값 생성 (더 밀집한 값)
new_t = np.linspace(0, len(points) - 1, 100)

# B-spline에서 얻은 새로운 좌표 생성
new_x = spl_x(new_t)
new_y = spl_y(new_t)

# 결과 그래프 그리기
plt.plot(x, y, 'o', label='Original Points')
plt.plot(new_x, new_y, label='B-spline Curve')
plt.title('B-spline Interpolation')
plt.legend()
plt.show()
